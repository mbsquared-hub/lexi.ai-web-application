<div class="chat-sidebar" [class.collapsed]="isCollapsed">
 
  <!-- Collapse Toggle Button -->
  <button class="collapse-toggle" (click)="toggleCollapse()" aria-label="Toggle sidebar">
    <svg *ngIf="!isCollapsed" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
      <line x1="9" y1="3" x2="9" y2="21"></line>
    </svg>
    <svg *ngIf="isCollapsed" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
      <line x1="15" y1="3" x2="15" y2="21"></line>
    </svg>
  </button>

  <div class="sidebar-content" *ngIf="!isCollapsed">
    <!-- Search Bar -->
    <div class="search-container">
      <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.35-4.35"></path>
      </svg>
      <input type="text" placeholder="Search your chats" [value]="searchQuery" (input)="onSearchChange($event)" class="search-input"/>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <button class="action-btn" (click)="onNewChat()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="12" y1="18" x2="12" y2="12"></line>
          <line x1="9" y1="15" x2="15" y2="15"></line>
        </svg>
        <span>Create New Chat</span>
      </button>

      <button class="action-btn" (click)="onChatHistory()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
          <circle cx="9" cy="10" r="1"></circle>
          <circle cx="12" cy="10" r="1"></circle>
          <circle cx="15" cy="10" r="1"></circle>
        </svg>
        <span>Chat History</span>
      </button>
    </div>

    <!-- Divider -->
    <div class="divider"></div>

    <!-- Recent Chat Section -->
    <div class="recent-section">
      <h3 class="section-title">Recent</h3>

      <!-- Chat List -->
      <div class="chat-list">
        <div *ngFor="let chat of filteredChats" class="chat-item" [class.active]="selectedChatId === chat.id" (click)="selectChat(chat.id)">
          <span class="chat-title">{{ chat.title }}</span>
          
          <!-- Delete Button - shows on hover -->
          <button class="delete-btn" (click)="deleteChat($event, chat.id)" aria-label="Delete chat">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="3 6 5 6 21 6"></polyline>
              <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            </svg>
          </button>
        </div>

        <!-- Empty State -->
        <div *ngIf="filteredChats.length === 0" class="empty-state">
          <p>No conversations found</p>
        </div>
      </div>
    </div>

    <!-- User Profile Section -->
    <div class="user-profile">
      <div class="profile-info">
        <div class="avatar">
          <img src="assets/icon-profile.jpg" alt="Profile" class="profile-pic"/>
        </div>
        <div class="user-details">
          <p class="user-name">Jane Doe</p>
          <p class="user-role">User</p>
        </div>
      </div>
      <div class="menu-container">
        <button class="menu-btn" [class.active]="isDropdownOpen" (click)="toggleDropdown()" aria-label="User menu">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="1"></circle>
            <circle cx="12" cy="5" r="1"></circle>
            <circle cx="12" cy="19" r="1"></circle>
          </svg>
        </button>
        
        <!-- Dropdown Menu -->
        <div class="dropdown-menu" *ngIf="isDropdownOpen">
          <button class="dropdown-item" (click)="onLogout()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
              <polyline points="16 17 21 12 16 7"></polyline>
              <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            <span>Log out</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Collapsed State - Just the toggle button -->
  <div class="collapsed-content" *ngIf="isCollapsed">
    <!-- You can add collapsed state icons here if needed -->
  </div>
</div>